
# 0 . 클라우드 아키텍처란?

> `클라우드 아키텍처는 웹서비스의 인프라를 클라우드 환경에서 어떻게 설계하고 배포할 것인지에 대한 전체적인 구조와 계획을 말한다`. 이는 웹 서비스의 성능, 안정성, 확장성 및 비용 효율성을 최적화한다

**왜 클라우드 아키텍처가 중요한가?**  
1. **가용성 높이기**: 클라우드는 여러 서버와 데이터 센터를 활용하기 때문에 하나의 서버나 위치에 문제가 생겨도 다른 곳에서 서비스를 지속할 수 있다.  
2. **확장성**: 사용자 수가 늘어나면 자원을 추가로 확보하는 것이 쉽다.반대로 사용량이 줄어들면 불필요한 자원을 줄일 수 있어 비용 효율성이 뛰어나다.  
3. **유지 보수성 및 관리성**: 클라우드 아키텍처를 통해 업데이트, 보안 패치, 백업 등의 작업을 중앙에서 효과적으로 관리할 수 있다.

**실제 프로덕션 환경에서는 어떻게 운영하나요?**  
실제 환경에서는 꾸준한 모니터링을 통해 서비스의 상태를 확인하며, 문제가 발생하면 빠르게 대응한다. 또한, 데이터의 백업 및 복원, 보안 강화, 서비스 확장 등의 작업을 계획적으로 수행하여 사용자에게 안정적인 서비스를 제공할수있다.

요약하자면, `클라우드 아키텍처는 웹 서비스를 안정적으로 제공하고, 변화하는 사용자 요구와 환경에 유연하게 대응하기 위한 핵심적인 설계 과정`이라고 말할 수 있겠다. 이를 통해 우리의 서비스는 항상 최적의 상태로 사용자에게 제공될 수 있다.



## 1. Web Application 3Tier-Architecture란?
![[Pasted image 20231115020426.png]]
**3Tier-Architecture**란 응용 프로그램을 **3개의 논리적 및 물리적 컴퓨팅 계층으로 구성**하는 방식이다.  
이 방식은 각 계층이 분리되어 자체 인프라에서 실행되기 때문에 동시에 개발이 가능하며 다른 계층에 영향을 주지 않으면서 확장이나 업데이트될 수 있다는 장점이 있다.


#### 3개의 티어로 구성
- Presentation tier : 사용자와 직접 소통하는 티어, 주로 HTML/CSS 와 같은 유저를 위한 UI 로 구성
- Application tier : 실제 로직을 처리하는 티어로 다양한 프로그래밍 언어(PHP,JAVA,Python) 등으로 구성됨 
- Data tier : 데이터를 저장하는 티어, 데이터 베이스 혹은 데이터를 처리하는 저장 공간으로 구성됨 .

Web Application 3Tier-Architecture는 위의 그림과 같이 Web Server-WAS-DB Server로 나눌 수 있다.
![[Pasted image 20231115020447.png]]

- **Web Server**  
    사용자 인터페이스를 지원하는 계층으로 웹 서버, 웹 사이트에 해당한다.  
    사용자에게 HTTP 요청을 받으면 WAS로 필요한 구성요소 요청을 보내고 받은 응답을 사용자에게 전달하는 역할을 한다.
- **WAS**  
    어플리케이션 계층에 해당하며, 요청되는 정보를 처리하고 가공하는 역할을 담당한다.  
    사용자가 Web Server에 HTTP 요청을 하게 되면 WAS에서는 필요한 데이터 쿼리를 DB서버에 요청하고 동적 컨텐츠를 만들어 제공하는 역할을 한다.
- **DB Server**  
    데이터베이스와 데이터베이스에 접근하여 필요한 데이터를 읽고 쓰는 것을 관리하는 모든 것을 포함한다.

![[Pasted image 20231115150844.png]]

#### 목적?
사용자 애플리케이션과 물리적 디비랑 계층간의 '분리' 가 목적이다.
-> 계층별로 역할을 분담 시켜서 일을 효율적으로 할 수 있다.
-> 효율적? => 문제가 생기면 각 계층에서 문제가 되는 부분만 해결할 수 있다.
-> 물리적 계층과 논리적인 계층의 **독립성**

#### MVC 패턴과 무엇이 다른 것 일까? 
3티어 아키텍쳐는, 물리적인 공간을 기준으로 역할을 구분한 것이고,
MVC 패턴은 소프트웨어 디자인 패턴중 하나로 컴포넌트간 역할을 분담한것이다. 사실 그냥 아예 다른 결인데 **프레젠테이션- 비즈니스- 데이터** 로 나뉘어서 헷갈릴 수도 있을 것 같다.

물리적인 공간을 3tier 로 나누고, 그 안의 애플리케이션에서 리퀘스트/ 리스폰스가 움직이는 내부는 MVC 패턴으로 이루는 것이다.

![[Pasted image 20231115151131.png]]

### 전통적인 IT 인프라 구조
![[Pasted image 20231115144332.png]]

#### 단점
인프라의 규모가 커질수록 관리가 어려워진다.
투자한만큼 성능이 늘어나지 않는다. 

### aws docs 에서의 3tier 아키텍쳐 개요
3티어 아키텍처는 멀티 티어 아키텍처에서 가장 널리 사용되는 구현이며 단일 프레젠테이션 티어, 로직 티어 및 데이터 티어로 구성됩니다. 다음 그림은 단순하고 일반적인 3티어 애플리케이션의 예를 보여줍니다.

![3티어 애플리케이션을 위한 아키텍처 패턴](https://docs.aws.amazon.com/ko_kr/whitepapers/latest/serverless-multi-tier-architectures-api-gateway-lambda/images/image2.png)

[출처](https://docs.aws.amazon.com/ko_kr/whitepapers/latest/serverless-multi-tier-architectures-api-gateway-lambda/three-tier-architecture-overview.html)


###### 그렇다면 이걸 왜 구현해야 하는가?
클라우드 아키텍처중 가장 기본이라고 할 수 있기 때문이다!




## 2. 아키텍쳐 파헤치기 

### 2.1  기본 3tier 아키텍쳐 
![[Pasted image 20231115145729.png]]


### 2.2. 3Tier-Architecture 구성을 위해 알아야 할 요소들 
#### **Amazon Virtual Private Cloud (VPC)**

**_VPC란?_**    
Amazon Virtual Private Cloud(VPC)를 사용하면 AWS 클라우드에서 논리적으로 격리된 공간을 프로비저닝하여 고객이 정의하는 가상 네트워크에서 AWS 리소스를 시작할 수 있습니다.

또한, IP 주소 범위 선택, 서브넷 생성, 라우팅 테이블 및 네트워크 게이트웨이 구성 등 가상 네트워킹 환경을 완벽하게 제어할 수 있습니다. VPC에서 IPv4와 IPv6를 모두 사용하여 리소스와 애플리케이션에 안전하고 쉽게 액세스할 수 있습니다.

[추천 영상](https://www.youtube.com/watch?v=R1UWYQYTPKo)


##### vpc 구성 요소 
- Virtual Private Cloud(VPC) - 사용자의 AWS 계정 전용 가상 네트워크입니다.
    
- 서브넷 - VPC의 IP 주소 범위입니다.
    
- 라우팅 테이블 - 네트워크 트래픽을 전달할 위치를 결정하는 데 사용하는 라우팅이라는 이름의 규칙 집합입니다.
    
- 인터넷 게이트웨이 - VPC에서 호스팅하는 리소스와 **인터넷 간의 통신을 가능하게 해주는** AWS 컴포넌트로서 서브넷 내 EC2와 같은 리소스가 Internet과 연결하기 위해 반드시 필요합니다. **Internet Gateway**는 수평적 확장성과 높은 가용성을 지닌 구성요소로 네트워크 대역폭에 제약이 없습니다. VPC 내에서 호스팅하는 서비스가 외부 세계에 액세스 되도록 채널 역할을 해주고 아울러 AWS 내에서 호스팅되는 리소스가 인터넷에 연결될 수 있도록 해줍니다.
    
- VPC 엔드포인트 - 인터넷 게이트웨이, NAT 디바이스, VPN 연결 또는 AWS Direct Connect 연결 없이도 PrivateLink로 구동하는 지원되는 AWS 서비스 및 VPC 엔드포인트 서비스에 비공개로 연결할 수 있게 합니다. VPC의 인스턴스는 서비스의 리소스와 통신하는 데 퍼블릭 IP 주소를 필요로 하지 않습니다. VPC와 기타 서비스 간의 트래픽은 Amazon 네트워크를 벗어나지 않습니다.
    
- CIDR 블록 - 클래스 없는 도메인 간 라우팅입니다. 인터넷 프로토콜 주소 할당 및 라우팅 집계 방법입니다.

> [!NOTE]
> 일단 vpc 개념만 작성해둠! 
> 나머지 IGW, ELB, ALB, NATGW,는 추후에..


#### 2.3 구축해보기!

[따라하기](https://velog.io/@lijahong/0%EB%B6%80%ED%84%B0-%EC%8B%9C%EC%9E%91%ED%95%98%EB%8A%94-AWS-%EA%B3%B5%EB%B6%80-3-Tier-%EA%B5%AC%EC%B6%95-1%ED%8E%B8-%EA%B5%AC%EC%B6%95-%EA%B3%84%ED%9A%8D-VPC-Bastion-Host)





#### 2.4 궁금하거나 같이 나누면 좋을 것

서브넷 ip 계산 
https://inpa.tistory.com/entry/WEB-IP-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%84%9C%EB%B8%8C%EB%84%B7-%EB%A7%88%EC%8A%A4%ED%81%AC-%EC%84%9C%EB%B8%8C%EB%84%B7%ED%8C%85-%EC%B4%9D%EC%A0%95%EB%A6%AC



#### 3. 추후 진행하면 좋을 3tier 응용
https://www.youtube.com/watch?v=jKANLpIOVKI

