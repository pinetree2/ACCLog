



### vpc 생성
![[Pasted image 20231115215300.png]]

### 서브넷 생성
아키텍쳐에 맞게 AZ 를 구분하였다.
![[Pasted image 20231115215825.png]]

![[Pasted image 20231115220311.png]]

### 인터넷 게이트웨이 생성과 연결
바깥 세상으로 나가려면, 대문을 열어야 한다 == GW
인터넷으로 나갈 수 있는 대문 == Internet GW
![[Pasted image 20231115215932.png]]

### 라우팅 테이블 생성
인터넷 -> igw -> 내부 어플리케이션
라우팅을 해줘야 한다.

일단 모든 ip 에 대해서 igw 로 라우팅 하게끔 설정
![[Pasted image 20231115220121.png]]
외부에서 들어오는 모든 요청은 igw 를 거친다. 

### public 서브넷 연결
![[Pasted image 20231115220212.png]]
어떤 서브넷은 인터넷과 통신 하도록/ 어떤 서브넷은 인터넷과 통신하지 못하도록 만들 수 있다.
외부에서 private 서브넷을 직접적으로 접근할 수 없다.
priavate 서브넷에 접근하기 위해서는 NAT GW 을 통해서 가능하다.

> [!NOTE]
> NAT GW 과금 ..장난아닙니다. 만들고 실습 다하면 바로 삭제하기!!!!

### NAT GW 생성
![[Pasted image 20231115220611.png]]

- NAT GW를 생성해주자. 유형이 프라이빗이라면, 외부와 통신이 안되기에 퍼블릭으로 설정합니다.
- 탄력적 IP는 외부와 통신하기 위한 IP로, 인스턴스에서 외부와 통신을 할 때 사용하는 출발지 IP이다. 하나 할당해줍니다.

##### 라우팅 테이블 생성(NAT 용)

![[Pasted image 20231115220727.png]]


### private 서브넷 연결
![[Pasted image 20231115220801.png]]

여기까지가 네트워크 기본구성

---

### Bastion Host
ec2 생성
![[Pasted image 20231115221016.png]]
![[Pasted image 20231115221054.png]]

탄력적 IP 연결 (IP 고정)
![[Pasted image 20231115223647.png]]

접속완료
![[Pasted image 20231115223834.png]]


